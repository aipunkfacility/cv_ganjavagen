---
name: feature-implementation
description: Руководство и стандарты для реализации новых функций в проекте.
---
# feature-implementation

Этот навык обеспечивает стандартизированный подход к разработке новых функций, гарантируя высокое качество кода, производительность и поддерживаемость.

## Когда использовать

- При получении задачи на разработку новой функциональности (например, "Добавить блог", "Сделать темную тему").
- При рефакторинге существующих модулей.
- Когда пользователь просит "сделать правильно" или "по лучшим практикам".

## Принципы разработки (Best Practices)

### 1. Архитектура и структура

- **Component-First**: Разбивайте UI на маленькие, переиспользуемые Astro-компоненты.
- **Политика нулевых сайд-эффектов**: Компоненты не должны влиять на глобальное состояние или стили, если это не их прямая задача (Layouts).
- **Слоеная архитектура**:
  - `src/components/`: "Глупые" компоненты (UI).
  - `src/layouts/`: Обертки страниц.
  - `src/pages/`: Роутинг и получение данных.
  - `src/i18n/`: Локализация.
  - `src/styles/`: Глобальные стили (только переменные и сброс).

### 2. Astro & Performance

- **Zero-JS by Default**: Используйте `.astro` компоненты без клиентских скриптов, где это возможно.
- **Islands Architecture**: Если интерактивность нужна, используйте директивы `client:visible` или `client:idle`. Избегайте `client:load` без крайней необходимости.
- **Изображения**: Всегда указывайте `width` и `height` для `<img>` (или используйте `<Image />`), `alt` обязателен.

### 3. TypeScript & Type Safety

- **Strict Mode**: Никаких `any`. Используйте интерфейсы и типы.
- **Props Validation**: Все пропсы компонентов должны быть типизированы через `interface Props`.

### 4. CSS & Styling

- **Vanilla CSS**: Используйте нативный CSS.
- **Scoped Styles**: Стили внутри `<style>` в Astro-компонентах по умолчанию изолированы. Используйте это.
- **Variables**: Используйте CSS-переменные из `src/styles/vars.css` (цвета, отступы).

### 5. i18n (Интернационализация)

- **Hardcode Forbidden**: Весь текст должен быть вынесен в словари `src/i18n/ui.ts` или `src/i18n/utils.ts`.
- **Маршрутизация**: Проверяйте работу на всех языках (RU/EN/VI).

### 6. External Libraries (Context7)

- **Document First**: Перед использованием незнакомой библиотеки или сложного API, используйте `mcp_context7` для получения актуальной документации и примеров.
- **Best Practices**: Спрашивайте "best practices for X in Astro" через `context7`.

## Workflow реализации

1. **Анализ требований**: Понять задачу, проверить существующие компоненты.
2. **Декомпозиция**: Разбить задачу на подзадачи в `task.md`.
3. **Локализация**: Добавить ключи переводов в `src/i18n/`.
4. **Реализация**: Написать код (Компонент -> Страница -> Стили).
5. **Верификация**:
    - `npm run dev` (визуальная проверка).
    - `npx astro check` (проверка типов).
    - Проверка адаптивности (Mobile/Desktop).
6. **Документирование**: Обновить `README.md` или `CHANGELOG.md` при необходимости.

## Пример (Few-Shot)

**Задача**: Добавить кнопку "Наверх" (Back to Top).

**Решение**:

1. Создать компонент `BackToTop.astro`.
2. HTML: `<button id="back-to-top" aria-label={t('nav.backToTop')}>...</button>`.
3. JS: Скрипт прокрутки внутри `<script>`.
4. CSS: Стили внутри `<style>`.
5. i18n: Добавить `'nav.backToTop': 'Наверх'` в словари.
6. Интеграция: Добавить компонент в `Layout.astro`.
